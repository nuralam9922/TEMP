:root {
  color-scheme: dark;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --bg: #060810;
  --panel: #0d1424;
  --panel-2: #111c30;
  --border: #27324b;
  --text: #f5f7ff;
  --muted: #9caad0;
  --accent: #4f91ff;
  --accent-2: #7dffcc;
  --danger: #ff7373;
  --left-width: 62%;
  --console-height: 24%;
}

body.high-contrast {
  --bg: #020308;
  --panel: #0a0f1c;
  --panel-2: #0f1730;
  --border: #3b4c75;
  --text: #ffffff;
  --muted: #c0c9e5;
}

* { box-sizing: border-box; }
html, body {
  margin: 0;
  height: 100%;
  overflow: hidden;
  background: radial-gradient(circle at top right, #1a2452 0%, var(--bg) 50%);
  color: var(--text);
}
h1, h2, h3, p { margin: 0; }

.workspace {
  display: grid;
  grid-template-rows: auto auto 1fr;
  gap: 10px;
  height: 100vh;
  padding: 10px;
}

.panel {
  background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

.topbar {
  padding: 10px 14px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}
.eyebrow {
  color: var(--accent-2);
  letter-spacing: .08em;
  text-transform: uppercase;
  font-size: .72rem;
}
.status-pills { display: flex; flex-wrap: wrap; gap: 8px; }

.pill {
  border: 1px solid #35508b;
  background: #111d34;
  color: #bad4ff;
  padding: 4px 9px;
  border-radius: 999px;
  font-size: .8rem;
}
.pill.running { border-color: #24bc96; color: #7dffcc; background: #0e3028; }
.pill.error { border-color: #ab3e58; color: #ff95ad; background: #331722; }

.utility-row {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
}

.utility-row input[type='search'] { min-width: 190px; }

.studio-shell {
  min-height: 0;
  display: grid;
  grid-template-columns: minmax(420px, var(--left-width)) 10px minmax(320px, 1fr);
  gap: 8px;
  padding: 8px;
}
.panel-column { min-height: 0; display: grid; gap: 8px; }
.left-col { grid-template-rows: auto auto minmax(160px,1fr) 10px minmax(90px,var(--console-height)) auto; }
.right-col { grid-template-rows: 1fr 0.9fr; }

.editor-toolbar, .controls, .snippet-toolbar {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}
label { display: inline-flex; gap: 6px; align-items: center; color: var(--muted); font-size: .82rem; }
select, input, button {
  border-radius: 8px;
  border: 1px solid #345;
  background: #0b1220;
  color: var(--text);
  padding: 7px 9px;
}
button { cursor: pointer; transition: .2s ease; }
button:hover { transform: translateY(-1px); }
button.primary { border-color: #3578e5; background: linear-gradient(180deg,#2f7dff,#1f56a8); }

.editor-shell {
  min-height: 0;
  position: relative;
  display: grid;
  grid-template-columns: 52px 1fr;
  border: 1px solid var(--border);
  border-radius: 10px;
  overflow: hidden;
  background: #080d19;
}
#lineNumbers {
  margin: 0;
  padding: 12px 8px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  color: #506086;
  text-align: right;
  line-height: 1.42;
  background: #0e1424;
  border-right: 1px solid #22304e;
  user-select: none;
  overflow: hidden;
}
#codeEditor {
  width: 100%;
  min-height: 0;
  border: 0;
  padding: 12px;
  resize: none;
  background: #080d19;
  color: #eaf1ff;
  line-height: 1.42;
  font-size: .93rem;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}
#console {
  min-height: 0;
  margin: 0;
  padding: 10px;
  border-radius: 10px;
  border: 1px solid #2f3f62;
  background: #050912;
  color: #8ff6b0;
  overflow: auto;
}

.sim-panel, .help-panel {
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 0;
}
.stats-grid { display: grid; grid-template-columns: repeat(3, minmax(90px,1fr)); gap: 8px; }
.stats-grid article { background: #0b1220; border: 1px solid #243250; border-radius: 10px; padding: 8px; }
.stats-grid h3 { font-size: 1.1rem; color: #e9f0ff; }
.stats-grid p { color: var(--muted); font-size: .8rem; }

.led-strip {
  display: grid;
  grid-template-columns: repeat(6, minmax(32px, 1fr));
  gap: 8px;
  padding: 8px;
  background: #08101f;
  border-radius: 10px;
  border: 1px solid #243250;
  min-height: 0;
}
.led {
  aspect-ratio: 1;
  border-radius: 10px;
  background: rgba(255,45,55,.08);
  border: 1px solid rgba(255,255,255,.08);
  cursor: pointer;
}
.legend { color: var(--muted); display: flex; flex-wrap: wrap; gap: 10px; font-size: .8rem; }

.api-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(210px,1fr));
  gap: 8px;
  overflow: auto;
  padding-right: 4px;
}
.api-item { border: 1px solid #2b3c62; border-radius: 10px; background: #091327; padding: 8px; display: flex; flex-direction: column; gap: 4px; }
.api-item code { color: #a6ccff; font-size: .84rem; }
.api-item p { color: var(--muted); font-size: .78rem; }
.help-note { color: var(--muted); font-size: .8rem; }
.snippet-btn { font-size: .76rem; padding: 5px 8px; }

.drag-handle { border-radius: 6px; border: 1px solid #33476f; background: linear-gradient(180deg,#192946,#0f1a2e); }
.drag-handle.vertical { cursor: col-resize; }
.drag-handle.horizontal { cursor: row-resize; }

.autocomplete {
  position: absolute;
  bottom: 12px;
  left: 66px;
  width: 260px;
  max-height: 190px;
  overflow: auto;
  margin: 0;
  padding: 5px;
  list-style: none;
  border-radius: 8px;
  border: 1px solid #3b4f78;
  background: #091529;
  z-index: 10;
}
.autocomplete li {
  padding: 6px 8px;
  border-radius: 6px;
  cursor: pointer;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: .82rem;
}
.autocomplete li:hover, .autocomplete li.active { background: #1d355c; }
.hidden { display: none; }

.fallback-banner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 8px 12px;
  border: 1px solid #6b3f4e;
  background: #331722;
  color: #ffd3dc;
  border-radius: 8px;
  font-size: .82rem;
}
.fallback-banner button { border: 1px solid #9d5c6f; background: #4a2030; color: #ffe5eb; }

@media (max-width: 1180px) {
  .studio-shell { grid-template-columns: 1fr; grid-template-rows: minmax(0,1fr) minmax(0,1fr); }
  #shellResize { display: none; }
  .left-col { grid-template-rows: auto auto minmax(140px,1fr) 8px minmax(120px,36%) auto; }
}
