:root {
  --bg: #060913;
  --panel: #111827;
  --panel-2: #0b1222;
  --border: #1f2a44;
  --text: #e5edff;
  --muted: #9db0d2;
  --accent: #4f8cff;
  --ok: #58e39f;
  --warn: #ffbe5b;
  --danger: #ff7a7a;
  --left-width: 58%;
  --console-height: 34%;
}

* { box-sizing: border-box; }
html, body { margin: 0; height: 100%; background: radial-gradient(circle at top, #111b35, #05070e 55%); color: var(--text); }
body { font-family: Inter, system-ui, sans-serif; overflow: hidden; }

.hidden { display: none !important; }
.app-shell { height: 100dvh; display: flex; flex-direction: column; gap: 10px; padding: 10px; }
.topbar { min-height: 68px; border: 1px solid var(--border); border-radius: 14px; background: rgba(15, 23, 42, .8); display: flex; align-items: center; justify-content: space-between; padding: 10px 14px; gap: 12px; }
.eyebrow { margin: 0; color: var(--muted); font-size: 12px; }
h1 { margin: 2px 0 0; font-size: 20px; }
.top-actions { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; justify-content: flex-end; }

.workspace-grid { min-height: 0; flex: 1; display: grid; grid-template-columns: minmax(320px, var(--left-width)) 8px minmax(320px, 1fr); gap: 8px; }
.pane { min-height: 0; border: 1px solid var(--border); border-radius: 14px; background: linear-gradient(165deg, var(--panel), var(--panel-2)); overflow: hidden; }
.left-pane { display: grid; grid-template-rows: auto auto minmax(200px, 1fr) 8px minmax(120px, var(--console-height)); padding: 10px; gap: 8px; }
.right-pane { display: grid; grid-template-rows: minmax(220px, 1fr) minmax(180px, 1fr); gap: 10px; padding: 10px; }

.toolbar,.snippet-toolbar,.sim-head,.help-head,.console-head { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.toolbar select,.help-head input { height: 34px; border-radius: 10px; border: 1px solid var(--border); background: #0b1428; color: var(--text); padding: 0 10px; }

.btn { height: 34px; border: 1px solid var(--border); border-radius: 10px; background: #152138; color: var(--text); padding: 0 12px; cursor: pointer; }
.btn:hover { border-color: #4565a5; }
.btn-primary { background: linear-gradient(135deg, var(--accent), #6da8ff); color: #06112a; font-weight: 700; }
.pill { border: 1px solid var(--border); border-radius: 999px; padding: 5px 10px; font-size: 12px; color: var(--muted); }
.pill.idle { color: var(--ok); }

.editor-panel { min-height: 0; border: 1px solid var(--border); border-radius: 10px; overflow: hidden; }
.CodeMirror { height: 100% !important; font-size: 14px; }
.console-panel { min-height: 0; display: flex; flex-direction: column; border: 1px solid var(--border); border-radius: 10px; overflow: hidden; background: #070b16; }
#console { margin: 0; padding: 10px; flex: 1; min-height: 0; overflow: auto; font-size: 12px; color: #bee2ff; }

.drag-handle { border-radius: 999px; background: #1f2f4f; position: relative; }
.drag-handle:hover { background: #2f4775; }
.drag-handle.vertical { cursor: col-resize; }
.drag-handle.horizontal { cursor: row-resize; }

.sim-panel,.help-panel { min-height: 0; border: 1px solid var(--border); border-radius: 10px; padding: 10px; display: flex; flex-direction: column; gap: 10px; background: rgba(5, 10, 25, .55); }
.stats-grid { display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 8px; }
.stats-grid article { border: 1px solid var(--border); border-radius: 10px; background: #0d172d; padding: 8px; text-align: center; }
.stats-grid h3 { margin: 0; font-size: 20px; }
.stats-grid p { margin: 4px 0 0; font-size: 12px; color: var(--muted); }

.led-strip { min-height: 0; flex: 1; display: grid; grid-template-columns: repeat(6, minmax(34px, 1fr)); gap: 8px; overflow: auto; }
.led { aspect-ratio: 1/1; border-radius: 999px; border: 1px solid #3c4e74; background: rgba(255, 71, 87, .08); box-shadow: 0 0 4px rgba(255, 71, 87, .1); }
.api-list { min-height: 0; overflow: auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(230px, 1fr)); gap: 8px; }
.api-card { border: 1px solid var(--border); border-radius: 10px; padding: 8px; background: #0d172d; }
.api-card h3 { margin: 0 0 4px; font-size: 13px; }
.api-card p { margin: 0; color: var(--muted); font-size: 12px; }
.help-note { margin: 0; color: var(--muted); font-size: 12px; }

.fallback-banner { border: 1px solid #5c4232; border-radius: 10px; background: #2d1a12; color: #ffd6bb; padding: 8px 10px; display: flex; align-items: center; justify-content: space-between; gap: 8px; }

@media (max-width: 1100px) {
  .workspace-grid { grid-template-columns: 1fr; grid-template-rows: minmax(300px, 1fr) minmax(280px, 1fr); }
  #shellResize { display: none; }
}

body.theme-light { --bg:#f4f7ff; --panel:#ffffff; --panel-2:#eef3ff; --border:#c8d3ee; --text:#12213d; --muted:#4b5e87; background: radial-gradient(circle at top,#dfe9ff,#edf2ff 60%); }
body.theme-light .btn{background:#eef3ff;color:#12213d;}
body.theme-light .pill{color:#2f4f86;}
